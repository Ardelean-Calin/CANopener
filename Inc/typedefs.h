#ifndef TYPEDEFS_H_
#define TYPEDEFS_H_

#include "FreeRTOS.h"

#define CAN_TX_BUFFER_SIZE 10
#define CAN_RX_BUFFER_SIZE 10

// Fixed packet size for USB messages
#define USB_DEC_PACKET_SIZE (16U)
#define USB_ENC_PACKET_SIZE (USB_DEC_PACKET_SIZE + 2)

typedef struct
{
    uint8_t ucSize;
    uint8_t pucData[USB_DEC_PACKET_SIZE];
} xUSBTxFrame_t;

enum
{
    CAN_BAUDRATE_1000K = 0,
    CAN_BAUDRATE_800K,
    CAN_BAUDRATE_666K,
    CAN_BAUDRATE_500K,
    CAN_BAUDRATE_250K,
    CAN_BAUDRATE_125K,
    CAN_BAUDRATE_100K,
    CAN_BAUDRATE_83K,
    CAN_BAUDRATE_50K,
    CAN_BAUDRATE_20K,
    CAN_BAUDRATE_10K,
    CAN_BAUDRATE_NOT_SUPPORTED
};

static const uint32_t CAN_BTR_VALUES[] = {
    0x001e0001, // CAN_BAUDRATE_1000K
    0x001b0002, // CAN_BAUDRATE_800K
    0x001e0002, // CAN_BAUDRATE_666K
    0x00050008, // CAN_BAUDRATE_500K
    0x001c0008, // CAN_BAUDRATE_250K
    0x001c0011, // CAN_BAUDRATE_125K
    0x0005002c, // CAN_BAUDRATE_100K
    0x001c001a, // CAN_BAUDRATE_83K
    0x001c002c, // CAN_BAUDRATE_50K
    0x000500e0, // CAN_BAUDRATE_20K
    0x001c00e0  // CAN_BAUDRATE_10K
};

#endif
